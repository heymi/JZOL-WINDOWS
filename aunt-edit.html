<html>
<header>
    <script src="js/allBiz.js"></script>
    <link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css">
    <script src="js/bootstrap-datetimepicker.js"></script>
</header>
<body>
<script>
    $(function () {
        var employeeId = getQueryString('employeeId');
        var paramData = {employee_id: employeeId};

        $.ajax({
            url: 'http://test.fuhui.com/employee/detail',
            type: 'POST',
            data: paramData,
            success: function (ret) {
                var retObj = JSON.parse(ret);

                //基本信息
                $("#identity").val(retObj.data.static.identity);
                $("#name").val(retObj.data.static.name);
                $("#sex input[value=" + retObj.data.static.sex + "]").prop('checked', true);
                $("#qualification input[value=" + retObj.data.static.qualification + "]").prop('checked', true);
                $("#phone").val(retObj.data.static.phone);
                $("#age").val(retObj.data.static.age);

                $('#native_provcityarea').province_city_area(retObj.data.static.native_prov,retObj.data.static.native_city,retObj.data.static.native_area);
                $('#native_addr').val(retObj.data.static.native_address);
                $('#living_provcityarea').province_city_area(retObj.data.static.living_prov,retObj.data.static.living_city,retObj.data.static.living_area);
                $('#living_addr').val(retObj.data.static.living_address);

                $("#nationality").val(retObj.data.static.nationality);
                $("#stature").val(retObj.data.static.stature);
                $("#body").val(retObj.data.static.body);
                $("#family").val(retObj.data.static.family);
                $("#content").val(retObj.data.static.content);

                $('#expected_salary').val(retObj.data.static.expect_salary);
                $('#daily_salary').val(retObj.data.static.daily_salary);

                //工作信息
                setMultiSelectValue('service_range', retObj.data.dynamic.service_range)
                setMultiSelectValue('status', retObj.data.dynamic.status)
                setMultiSelectValue('type', retObj.data.dynamic.type)
//                $('#expected_salary').val(retObj.data.static.expected_salary)
//                $('#daily_salary').val(retObj.data.static.daily_salary)
                $('#arrival_time').val(retObj.data.dynamic.arrival_time)
                $('#emergency').val(retObj.data.dynamic.emergency)
                $('#relationship').val(retObj.data.dynamic.relationship)
                $('#linkman_tel').val(retObj.data.dynamic.linkman_tel)
                $('#remark').val(retObj.data.dynamic.remark)
            }
        })
    })
</script>
<div class="container" style="background-color: #FFF"><!-- 右侧开始 -->
    <div class="content-wrapper">
        <div class="content-header-inner clearfix">
            <div class="bread-nav float-left">
                <ol class="breadcrumb">
                    <li><a href="aunt.html">阿姨管理</a></li>
                    <li class="active"><strong>简历</strong></li>
                </ol>
            </div>


            <div class="header-action float-right">
                <button type="button" class="btn-blue mgl10 fr" onClick="location.href='aunt-list.html'">阿姨历史订单
                </button>
                <button type="button" class="btn-grey mgl10 fr" onClick="location.href='aunt-shop.html'">供职家政公司
                </button>
            </div>
        </div>
        <div class="aunt-content ">
            <div class="personal-cv">
                <div class="cv-summary mgb40 clearfix "> <!-- 浮动清除 -->
                    <img src="img/avata.png" alt="avata" width="90" height="90" class="mgt5 fl">

                    <!--<div class="fr cv-descriptions mgt5 fl">-->
                    <!--<input type="text" class="form-control form-control-1x" id="name" required>-->
                    <!--</div>-->
                    <!--<div class="cv-contact fl">-->
                    <!--<div class="cv-contact-detail p15">-->
                    <!--<i class="fa fa-phone light pl10"></i> <input-->
                    <!--class="fontblue b pl10 f22" value="187-6394-7898">-->
                    <!--</div>-->
                    <!--<div class="cv-contact-detail p15 mgt1">-->
                    <!--<i class="fa fa-map-marker light pl10"></i> <span class="fontblue b pl10 f18"><a-->
                    <!--href="http://map.baidu.com/?newmap=1&s=s%26wd%3D%25E4%25BA%2594%25E8%25A7%2592%25E5%259C%25BA%26c%3D289%26b%3D(13526417.46%2C3648599.54%3B13529417.46%2C3651599.54)"-->
                    <!--target="_blank" class="fontblue">上海杨浦区五角场</a></span>-->
                    <!--</div>-->
                    <!--</div>-->
                    <!-- cv-contact end -->
                </div>
                <!-- cv-summary -->
                <div class="form-dialog">
                    <div class="form-content clearfix">

                        <div class="form-body" id="basicInfo">
                            <div class="modal-body-wrapper">
                                <form class="form-inline" id="basicInfoForm" role="form">
                                    <div class="form-group">
                                        <label id="" for="">身份证号：</label>
                                        <input type="text" class="form-control form-control-2x" id="identity"
                                               onchange="checkAuntExists(this)" required>

                                        <div class="help-block with-errors"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="name">阿姨姓名：</label>
                                        <input type="text" class="form-control form-control-1x" id="name" required>

                                        <div class="form-group" id="sex" required="true">
                                            <label>性别：</label>
                                            <label class="radio">
                                                <input type="radio" name="gender" id="male" value="1"> 男
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="gender" id="female" value="0" checked> 女
                                            </label>
                                        </div>
                                    </div>
                                    <!-- title-box end -->
                                    <div class="form-group">
                                        <label for="">联系电话：</label>
                                        <input type="text" class="form-control form-control-2x" id="phone">
                                    </div>
                                    <div class="form-group">
                                        <label for="age">年龄：</label>
                                        <input type="text" class="form-control form-control-1x" id="age">
                                    </div>
                                    <div class="form-group">
                                        <label for="native_prov">籍贯：</label>
                                        <div class="prov-city-area" id="native_provcityarea"></div>
                                        <input type="text" class="form-control" id="native_addr">
                                    </div>
                                    <div class="form-group">
                                        <label for="native_prov">现居地址：</label>
                                        <div class="prov-city-area" id="living_provcityarea"></div>
                                        <input type="text" class="form-control" id="living_addr">
                                    </div>
                                    <div class="form-group">

                                        <label for="nationality">民族：</label>
                                        <input type="text" class="form-control form-control-1x" id="nationality">
                                        <label for="zodiac_sign">属相：</label>
                                        <select class="form-control" id="zodiac_sign">
                                            <option value="1">鼠</option>
                                            <option value="2">牛</option>
                                            <option value="3">虎</option>
                                            <option value="4">兔</option>
                                            <option value="5">龙</option>
                                            <option value="6">蛇</option>
                                            <option value="7">马</option>
                                            <option value="8">羊</option>
                                            <option value="9">猴</option>
                                            <option value="10">鸡</option>
                                            <option value="11">狗</option>
                                            <option value="12">猪</option>
                                        </select>
                                        <label for="exampleInputPassword1">星座：</label>
                                        <select class="form-control">
                                            <option value="不限">狮子座</option>
                                            <option value="江苏">处女座</option>
                                            <option value="不限">双子座</option>
                                            <option value="江苏">射手座</option>
                                            <option value="不限">金牛座</option>
                                            <option value="江苏">天蝎座</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="stature">身高：</label>
                                        <input type="text" class="form-control form-control-1x" id="stature"> cm
                                        <label for="body">体重：</label>
                                        <input type="text" class="form-control form-control-1x" id="body"> 斤
                                    </div>

                                    <div class="form-group">
                                        <label for="qualification">学历：</label>

                                        <div class="radio-group" id="qualification">
                                            <label class="radio">
                                                <input type="radio" name="inlineRadioOptions" value="1">
                                                小学
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="inlineRadioOptions" value="2">
                                                初中
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="inlineRadioOptions" value="3">
                                                高中
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="inlineRadioOptions" value="4">
                                                大专
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="inlineRadioOptions" value="5">
                                                本科
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="inlineRadioOptions" value="6">
                                                其他
                                            </label>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!-- 从业经历结束 -->

                        <form class="form-inline" data-toggle="validator">
                            <h5 class="form-title">工作信息</h5>

                            <div class="form-group">
                                <label for="service_range" class="text-indent">求职意向：</label>

                                <div class="add-list checkbox" id="service_range">
                                    <label>
                                        <input type="checkbox" value="1"> 临时钟点工
                                    </label>
                                    <label>
                                        <input type="checkbox" value="2"> 长期钟点工
                                    </label>
                                    <label>
                                        <input type="checkbox" value="3"> 保姆
                                    </label>
                                    <label>
                                        <input type="checkbox" value="4"> 育儿嫂
                                    </label>
                                    <label>
                                        <input type="checkbox" value="5"> 疾病护理
                                    </label>
                                    <label>
                                        <input type="checkbox" value="6"> 老人护理
                                    </label>
                                    <label>
                                        <input type="checkbox" value="7"> 月嫂
                                    </label>
                                    <label>
                                        <input type="checkbox" value="8"> 早教
                                    </label>
                                    <label>
                                        <input type="checkbox" value="9"> 催乳师
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="status" class="text-indent">状态：</label>

                                <div class="radio-group" id="status">
                                    <label class="radio">
                                        <input type="radio" name="status" value="0"> 待岗
                                    </label>
                                    <label class="radio">
                                        <input type="radio" name="status" value="1"> 在职
                                    </label>
                                    <label class="radio">
                                        <input type="radio" name="status" value="2"> 可兼职
                                    </label>
                                    <label class="radio">
                                        <input type="radio" name="status" value="4"> 外派中
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="type" class="text-indent">类别：</label>

                                <div class="radio-group" id="type">
                                    <label class="radio">
                                        <input type="radio" name="type" id="inHome" value="1">
                                        住家
                                    </label>
                                    <label class="radio">
                                        <input type="radio" name="type" id="notInHome" value="0">
                                        不住家
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label for="">期望薪资：</label>
                                月薪：
                                <input id="expected_salary" type="text" class="form-control">
                                时薪：
                                <input id="daily_salary" type="text" class="form-control">
                            </div>
                            <div>
                                <label>服务区域：</label>
                            </div>

                            <div class="form-group">
                                <label for="">可到岗时间：</label>
                                <input type="text" class="form-control" value="" id="arrival_time">
                            </div>
                            <div class="form-group">
                                <label for="">紧急联系人：</label>
                                <input type="text" class="form-control" value="" id="emergency">
                            </div>
                            <div class="form-group">
                                <label for="">与本人关系：</label>
                                <input type="text" class="form-control" value="" id="relationship">
                            </div>
                            <div class="form-group">
                                <label for="">联系电话：</label>
                                <input type="text" class="form-control" value="" id="linkman_tel">
                            </div>
                            <label for="">特别说明：</label>
                            <textarea class="form-control" id="remark"></textarea>
                        </form>


                        <!-- 证件资料开始 -->
                        <div class="title-box clearfix"> <!-- 浮动清除 -->
                            <div class="line">
                                <h4 class="b resume-title titles">相关证件证书</h4>
                            </div>

                            <div class="row">
                                <div class="col-xs-6 col-md-3">
                                    <a href="#" class="thumbnail">
                                        <img src="img/id_pic_1.png" alt="身份证">
                                    </a>

                                    <p>
                                    <center>身份证正面照片</center>
                                    </p>
                                </div>
                                <div class="col-xs-6 col-md-3">
                                    <a href="#" class="thumbnail">
                                        <img src="img/id_pic_2.png" alt="身份证">
                                    </a>

                                    <p>
                                    <center>身份证正面照片</center>
                                    </p>
                                </div>
                                <div class="col-xs-6 col-md-3">
                                    <a href="#" class="thumbnail">
                                        <img src="img/id_pic_1.png" alt="身份证">
                                    </a>

                                    <p>
                                    <center>健康证</center>
                                    </p>
                                </div>
                                <div class="col-xs-6 col-md-3">
                                    <a href="#" class="thumbnail">
                                        <img src="img/id_pic_2.png" alt="身份证">
                                    </a>

                                    <p>
                                    <center>从业资格证</center>
                                    </p>
                                </div>
                            </div>

                        </div>
                        <!-- title-box end -->


                        <!-- 证件资料结束 -->

                        <div class="title-box clearfix"> <!-- 浮动清除 -->
                            <div class="line">
                                <h4 class="b resume-title titles">备注</h4>
                            </div>
                            <div class="resume-note mgt20 mgl10">
                                <p>此阿姨虐待过小狗</p>
                            </div>
                        </div>
                        <!-- title-box end -->
                        <button type="button" class="btn-yellow mgl20 fr"
                                onClick="saveAunt()"><i
                                class="fa fa-pencil pl19"></i> 保存
                        </button>

                    </div>
                    <!-- personal-cv end -->


                </div>
            </div>
            <!-- container end -->
        </div>
        </section>

</body>
<script type="text/javascript">

    function pageScroll() {
        parent.window.scrollBy(0, -100);
        scrolldelay = setTimeout('pageScroll()', 100);
        var sTop = parent.document.documentElement.scrollTop + parent.document.body.scrollTop;
        if (sTop == 0) {
            clearTimeout(scrolldelay);
            parent.document.getElementById("rightContent").setAttribute("src", "aunt.html")
        }
        ;
    }

    function saveAunt() {

        var employeeId = getQueryString('employeeId');
        var paramObj = {};
        paramObj.name = $("#name").val();
        paramObj.sex = $("#sex input:checked").val();
        paramObj.phone = $("#phone").val();
        paramObj.identity = $("#identity").val();
        paramObj.age = $("#age").val();
        paramObj.native_prov= $('#native_provcityarea .prov-select').val();
 		paramObj.native_city= $('#native_provcityarea .city-select').val();
 		paramObj.native_area= $('#native_provcityarea .area-select').val();
        paramObj.native_address = $('#native_addr').val();
        paramObj.marriage = "1";
        paramObj.nationality = '1';
        paramObj.zodiac_sign = '1';
        paramObj.body = $("#body").val();
        paramObj.stature = $("#stature").val();
        paramObj.qualification = $("#qualification input:checked").val();
        paramObj.living_prov= $('#living_provcityarea .prov-select').val();
 		paramObj.living_city= $('#living_provcityarea .city-select').val();
 		paramObj.living_area= $('#living_provcityarea .area-select').val();
        paramObj.living_address = $('#living_addr').val();

        paramObj.status = getMultiSelectValue('status');
        paramObj.employee_id = employeeId;
        paramObj.service_range = getMultiSelectValue('service_range');
        paramObj.emergency = $('#emergency').val();
        paramObj.relationship = $('#relationship').val();
        paramObj.linkman_tel = $('#linkman_tel').val();
        paramObj.expect_salary = $('#expected_salary').val();
        paramObj.daily_salary = $('#daily_salary').val();
        paramObj.arrival_time = $('#arrival_time').val();
        paramObj.remark = $('#remark').val();

        $.when(
                $.ajax({
                    url: 'http://test.fuhui.com/employee/update',
                    type: 'POST',
                    data: paramObj,
                    success: function (ret) {
                        var aaa = 123;
                    }
                }),
                $.ajax({
                    url: 'http://test.fuhui.com/employeeShop/update',
                    type: 'POST',
                    data: paramObj,
                    success: function (ret) {
                        var bbb = 123;
                    }
                })
        ).done(function (ret1, ret2) {
                    var ret1Obj = JSON.parse(ret1[0]);
                    var ret2Obj = JSON.parse(ret2[0]);
                    if (ret1Obj.code == '0' && ret2Obj.code == '0') {
//                        $.scojs_message('添加成功', $.scojs_message.TYPE_OK);
                        alert('添加成功')
                        window.setTimeout(pageScroll(), 1000);
                    }
                })
    }

    $('#datetimepicker').datetimepicker({
        format: 'yyyy-mm-dd hh:ii'
    });
    $('.prov-city-area').province_city_area();
</script>
</html>

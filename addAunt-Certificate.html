<html>
<header>
    <script src="js/allBiz.js"></script>
    <link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css">
    <script src="js/bootstrap-datetimepicker.js"></script>
    <script src="js/dropzone.js"></script>
    <link rel="stylesheet" href="js/utils/uploadPhoto.css">
    <script src="js/utils/uploadPhoto.js"></script>
    <style>
        .form-inline{overflow: hidden}
        .a-upload {
            padding: 4px 10px;
            height: 30px;
            position: relative;
            cursor: pointer;
            color: #888;
            background: #fafafa;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
            display: inline-block;
        }

        .a-upload  input {
            position: absolute;
            font-size: 100px;
            right: 0;
            top: 0;
            opacity: 0;
            filter: alpha(opacity=0);
            cursor: pointer
        }

        .a-upload:hover {
            color: #444;
            background: #eee;
            border-color: #ccc;
            text-decoration: none
        }
    </style>
</header>
<body>

<script>

    var employeeId = getQueryString("employee_id");
    var auntExists = false;
    var imgUrl = "http://images.jiazhengol.com/";
    $(function () {
        if (employeeId) {
            auntExists = true;
            auntId = employeeId;
            var paramData = {employee_id: employeeId};

            $.ajax({
                url: 'http://api.jiazhengol.com/employee/detail',
                type: 'POST',
                data: paramData,
                success: function (ret) {
                    var retObj = JSON.parse(ret);


                    _.each(retObj.data.upload, function (rec) {
                        if (rec.type == 'identity' || rec.type == 'identityHander') {
                            document.getElementById(rec.type + "ImgDiv").innerHTML = '<img id="' + rec.type + 'Img" src="' + imgUrl + rec.dir_name + '/' + rec.image_l + '">';
                        }
                    })
                    //基本信息
                    $("#identity").val(retObj.data.static.identity);
//                    document.getElementById("identityImgDiv").innerHTML = '<img id="identityImg" src="http://images.fuhui.com/33ec1e36f831c67e64c4549632d5869a/9b2672f061e26c2cb4e30edec3c2d638.jpg">';
//                    document.getElementById("identityImg").src = "http://images.fuhui.com/33ec1e36f831c67e64c4549632d5869a/64d479888e0da5b603b8d03a0fe12fba.jpg";
//                    $("#identityImg").attr("src", "http://images.fuhui.com/33ec1e36f831c67e64c4549632d5869a/64d479888e0da5b603b8d03a0fe12fba.jpg");
                }
            })
        }

        $('#message_trigger_ok').on('click', function(){
            var employeeId = getQueryString("employee_id");
            window.location.href = "aunt-resume.html?employeeId=" + employeeId;
//            var $btn = $(this).button('loading')
//            var paramObj = {};
//            paramObj.type = 'identity';
//            paramObj.employee_id = employeeId;
//            paramObj.upfile = $('#identityInput')[0].files[0];
//            UploadFile(paramObj)
//
//
//            var paramObj2 = {};
//            paramObj2.type = 'identityHander';
//            paramObj2.employee_id = employeeId;
//            paramObj2.upfile = $('#identityHanderInput')[0].files[0];
//            UploadFile(paramObj2)

//            _.each($('[identify]'), function (rec) {
//                var paramObj = {};
//                paramObj.type = rec.id;
//                paramObj.employee_id = employeeId;
//                paramObj.upfile = $('#' + rec.id + 'Input')[0].files[0];
//                UploadFile(paramObj)
//            })

//            window.setTimeout(function () {
//                alert('保存成功！')
//            }, 500);
        });
    });


    function certificateChange(ele) {
        if (ele.checked) {
            var formLastChild = $('#certFormId:last-child');
            var newArea = createPhotoDiv(ele.name)
            formLastChild.append(newArea);
        } else {
            $('#certFormId [identify="' + ele.name + '"]').remove()
        }
    }
</script>

<div class="container" style="background-color: #FFF"><!-- 右侧开始 -->
    <div class="content-wrapper">
        <h5 class="form-title">相关证件及证书</h5>


        <!--<div>-->
        <!--<form action="http://api.jiazhengol.com/employee/upload?type=identity&employee_id=63" class="dropzone dz-clickable" method="post"-->
        <!--id="dailyLifePic"  enctype="multipart/form-data" paramName="upfile">-->
        <!--<h5 class="form-title">生活照</h5>-->
        <!--<input type="hidden" name="type" value="Health">-->
        <!--<input type="hidden" name="employee_id" value="67">-->
        <!--<div class="dz-message">-->
        <!--点击上传或拖入图片<br>-->
        <!--<span class="note">图片大小为900*600以内</span>-->
        <!--</div>-->
        <!--<input type="submit" value="上传"/>-->
        <!--</form>-->
        <!--</div>-->
        <div class="clearfix">
            <form action="http://api.jiazhengol.com/employee/upload" enctype="multipart/form-data"
                  class="form-inline"
                  method="post"
                  name="uploadfile" id="indentifier">
                <h5 class="form-title">身份证</h5>
                <input type="hidden" name="type" value="Health">
                <input type="hidden" name="employee_id" value="31">

                <div class="fl" identify="identity" id="identity">
                    <div id="identityImgDiv">
                        <img id="'identityImg" width=100 height=100 border=0 src='img/jiazhengol.jpg'>
                    </div>
                    <div class="progress" style="display: none">
                  <div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                    <span class="sr-only">100% Complete</span>
                  </div>
                </div>
                    <br/>
                    <a href="javascript:;" class="a-upload">
                        <input type="file" name="" onchange="previewImage(this)" value="上传" id="identityInput">点击这里上传图片
                    </a>
                </div>
                <!--<br/>上传文件：<input type="file" name="upfile"/><br>-->
                <!--<input type="submit" value="上传"/>-->
            </form>
        </div>

        <div class="clearfix" style="display: none">
            <form action="http://api.jiazhengol.com/employee/upload" enctype="multipart/form-data"
                  class="form-inline"
                  method="post"
                  name="uploadfile" id="certFormId">
                <h5 class="form-title">拥有的技能证书及证件</h5>

                <div class="form-group">
                    <label for="certificate" class="text-indent">相关证书：</label>

                    <div class="add-list checkbox" id="certificate">
                        <label class="radio">
                            <input type="checkbox" name="Healthy" onchange="certificateChange(this)"> 健康证
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="eniorCare" onchange="certificateChange(this)">老人护理
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="domestic" onchange="certificateChange(this)"> 家政上岗证
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="nurseryTeacher" onchange="certificateChange(this)"> 育婴师
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="lactagogue" onchange="certificateChange(this)"> 母婴护理
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="montessori" onchange="certificateChange(this)"> 催乳
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="education" onchange="certificateChange(this)"> 早教
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="pediatricMassage" onchange="certificateChange(this)"> 小儿推拿
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="maternalSweating" onchange="certificateChange(this)"> 产妇发汗
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="monthOfMeals" onchange="certificateChange(this)"> 月子餐
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="postpartumSlimming" onchange="certificateChange(this)">产后纤体
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="dietitians" onchange="certificateChange(this)">营养师
                        </label>
                        <label class="radio">
                            <input type="checkbox" name="nurse" onchange="certificateChange(this)">保育员
                        </label>
                    </div>
                </div>
                <!--<input type="hidden" name="type" value="Health">-->
                <!--<input type="hidden" name="employee_id" value="31">-->

                <!--<div class="fl">-->
                <!--<div id="preview">-->
                <!--<img id="imghead" width=100 height=100 border=0 src='img/jiazhengol.jpg'>-->
                <!--</div>-->
                <!--<br/>上传文件：<input type="file" onchange="previewImage(this)" value="上传"/>-->
                <!--</div>-->
                <!--<br/>上传文件：<input type="file" name="upfile"/><br>-->
                <!--<input type="submit" value="上传"/>-->
            </form>
        </div>


        <div class="clearfix">
            <form action="http://api.jiazhengol.com/employee/upload" enctype="multipart/form-data"
                  class="form-inline"
                  method="post"
                  name="uploadfile">
                <h5 class="form-title">生活照：</h5>
                <input type="hidden" name="type" value="Health">
                <input type="hidden" name="employee_id" value="31">

                <div class="fl" identify="identityHander" id="identityHander">
                    <div id="identityHanderImgDiv">
                        <img id="identityHanderImg" width=100 height=100 border=0 src='img/jiazhengol.jpg'>
                    </div>
                    <div class="progress" style="display: none">
                  <div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                    <span class="sr-only">100% Complete</span>
                  </div>
                </div>
                    <br/>
                    <a href="javascript:;" class="a-upload">
                        <input type="file" name="" onchange="previewImage(this)" value="上传" id="identityHanderInput">点击这里上传图片
                    </a>
                </div>
            </form>
        </div>
<div class="form-info fl">
						      		<p>注：<span class="enter-need">*</span>为必填项</p>

						      </div>
        <div class="form-footer float-right">
            <button id="message_trigger_ok" type="button" class="btn-green-big" data-loading-text="上传图片中，请稍候...">保存</button>
        </div>
    </div>
</div>
</body>
</html>
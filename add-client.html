<html>
<header>
	<script src="js/allBiz.js"></script>
	<link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css">
	<script src="js/bootstrap-datetimepicker.js"></script>
</header>
<body>

<div class="container" style="background-color: #FFF"><!-- 右侧开始 -->
				<div class="content-wrapper">
					<div class="content-header-inner">
					<div class="bread-nav float-left">
						<ol class="breadcrumb">
							<li><a href="client.html">雇主管理</a></li>
	 						<li class="active"><strong>新增雇主</strong></li>
						</ol>
					</div>
					<div class="header-action float-right">

			<button type="button" class="btn-blue mgl7 fr" style="display: none">使用身份证阅读器录入</button>



				</div>				
				</div>
					<div class="form-dialog">
						<div class="form-content clearfix">
   							<div class="form-body">
   								<div class="modal-body-wrapper">
									<form class="form-inline">
										<h5 class="form-title">雇主资料</h5>
										<div class="form-group">
										    <label for="exampleInputEmail1"><span class="enter-need">*</span>雇主姓名：</label>
										    <input type="text" class="form-control" autofocus="true" id="username">

										</div>
										<div class="form-group" id="client_sex">
										   <label for="exampleInputPassword1" class="text-indent"><span class="enter-need">*</span>性别：</label>
										   <label class="radio">
											  <input type="radio" name="client_sex" value="1"> 先生
											</label>
											<label class="radio">
											  <input type="radio" name="client_sex" value="2"> 女士
											</label>
											<label class="radio">
											  <input type="radio" name="client_sex" checked value="0"> 保密
											</label>
										</div>
										<div class="form-group">
										    <label for=""><span class="enter-need">*</span>手机号码：</label>
										    <input type="text" class="form-control" id="phone">

										</div>
										<div class="form-group">

										   <label for="exampleInputPassword1">固定电话：</label>
										    <input type="text" class="form-control" id="tellphone">
										</div>
										<div class="form-group">
										    <label for=""><span class="enter-need">*</span>服务地址：</label>
										   <div class="prov-city-area"></div>
										    <input type="text" class="form-control" id="addr">
										</div>
										<div class="form-group" style="display:none">
										    <label for=""><span class="enter-need">*</span>身份证号：</label>
										    <input type="text" class="form-control form-control-3x" id="identity">
										</div>

									</form>
									<form class="form-inline">
										<h5 class="form-title">工作内容</h5>
									<div class="form-group">
									    <label for="">家庭情况：</label>
									    <textarea class="form-control" id="family"></textarea>

									  </div>
									  <div class="form-group">
									    <label for="">服务需求：</label>
									    <textarea class="form-control" id="specfic_requirement"></textarea>
									  </div>
										<div class="form-group">
									    <label for="">需求详情：</label>
									    <textarea class="form-control" id="client_content"></textarea>
									  </div>
									  <div class="form-group">
									    <label for="" class="text-indent">备注：</label>
									    <textarea class="form-control" id="remark"></textarea>

									  </div>

									</form>
						      </div>
						     </div>

<div class="form-info fl">
						      		<p>注：<span class="enter-need">*</span>为必填项</p>

						      </div>
						      <div class="form-footer float-right">

						      	<button type="button" class="btn-none" data-toggle="modal" data-target=".bs-example-modal-sm">放弃</button>
						        <button id="message_trigger_ok" type="button" class="btn-green-big">保存</button>

						      </div>
						    </div>

						<!-- Modal -->
							<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
							  <div class="modal-dialog modal-sm">
							    <div class="modal-content">
							      <div class="modal-header">
							        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							        <h4 class="modal-title" id="myModalLabel">放弃添加</h4>
							      </div>
							      <div class="modal-body">
							        您确定放弃当前添加？
							      </div>
							      <div class="modal-footer">
							        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
							        <button type="button" class="btn btn-primary" id="cancel_add">放弃</button>
							      </div>
							    </div>
							  </div>
							</div>
					</div>
			</div><!-- container end -->
		</div>
	</section>
</body>
<script type="text/javascript">
	$('#message_trigger_ok').on('click', function(e) {
    	e.preventDefault();
        var paramObj = {};
        paramObj.identity = $("#identity").val();
 		paramObj.username = $("#username").val();
		if($("#tellphone").val()){
			paramObj.tell = $("#tellphone").val();
		}

 		paramObj.addr= $("#addr").val();
 		paramObj.source= 1;
		if($("#specfic_requirement").val()){
			paramObj.specfic_requirement=$("#specfic_requirement").val();
		}
 		paramObj.phone= parseInt($("#phone").val(),10);
 		paramObj.sex= $("#client_sex input:checked").val();
 		paramObj.prov= $('.prov-select').val();
 		paramObj.city= $('.city-select').val();
 		paramObj.area= $('.area-select').val();
		if($("#family").val()){
			paramObj.family=$("#family").val();
		}
 		if($('#client_content').val()){
			paramObj.content= $('#client_content').val();
		}
 		if($("#remark").val()){
			paramObj.remark=$("#remark").val();
		}
        $.ajax({
            url: "http://api.jiazhengol.com/employer/add",
            type: 'POST',
            data: paramObj,
            success: function (data, textStatus) {
                var obj = JSON.parse(data)
                if (obj.code == 0) {
                    $.scojs_message('添加成功', $.scojs_message.TYPE_OK);
                	parent.document.getElementById("rightContent").setAttribute("src", "client.html?employee_id=ret.data.id");
                }else{
					$.scojs_message(errorCode["code_" + obj.code], $.scojs_message.TYPE_ERROR)
				}
            },
            error: function (ret) {
                alert('error')
            }
        })
//		parent.document.getElementById("rightContent").setAttribute("src", "client.html");
   });

  	$('#message_trigger_err').on('click', function(e) {
    	e.preventDefault();
    	$.scojs_message('添加失败', $.scojs_message.TYPE_ERROR);
    });
	$('#datetimepicker').datetimepicker({
	    format: 'yyyy-mm-dd hh:ii'
	});

	$('#cancel_add').on('click', function(){
        parent.document.getElementById("rightContent").setAttribute("src", "client.html");
    });
    $('.prov-city-area').province_city_area();
</script>
</html>
